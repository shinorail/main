<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ログイン | 篠ノ井タイムズ</title>
    <style>
        body { background:#f4f4f4; font-family:serif; display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0; }
        .container { background:#fff; width:90%; max-width:400px; padding:30px; border:1px solid #000; box-shadow:5px 5px 0px #ccc; }
        input { width:100%; padding:10px; margin:10px 0; border:1px solid #ccc; box-sizing:border-box; }
        button { width:100%; padding:15px; background:#004da0; color:#fff; border:none; font-weight:bold; cursor:pointer; }
    </style>
</head>
<body>
    <div class="container">
        <h2 style="border-bottom:2px solid #000; text-align:center;">会員ログイン</h2>
        <form onsubmit="loginProcess(event)">
            <label>メールアドレス</label>
            <input type="email" name="email" required>
            <label>パスワード</label>
            <input type="password" name="password" required>
            <button type="submit">ログイン</button>
        </form>
        <p style="text-align:center;"><a href="register.html">新規登録はこちら</a></p>
        <p style="text-align:center;"><a href="forgot.html">パスワードを忘れた方</a></p>
    </div>

    <script>
    async function loginProcess(event) {
        event.preventDefault();
        // ★ここをあなたのGASのURLに書き換え
        const url = "https://script.google.com/macros/s/AKfycbzuta6xRTHYX7wHtYJ54O_QhJzXRwxGOBC8j7zjIwbE-mK23Afi_M5JJAIqYNo6OO79kQ/exec";
        const formData = new FormData(event.target);
        formData.append("action", "login");

        try {
            const response = await fetch(url, { method: "POST", body: formData });
            const result = await response.text();
            if (result === "success") {
                localStorage.setItem("userEmail", formData.get("email"));
                alert("ログイン成功！");
                window.location.href = "train-news.html";
            } else { alert("メールアドレスかパスワードが違います"); }
        } catch (e) { alert("通信エラーが発生しました"); }
    }
    </script>
</body>
</html>
