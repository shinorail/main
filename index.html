<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ›ãƒ¼ãƒ  - ç¯ ãƒäº•ä¹—å‹™åŒº</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1a1a1a">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="icon-192.png">

<link rel="stylesheet" href="style.css">

<style>
/* ===== indexå°‚ç”¨ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆå…ƒUIåŸºæº–ï¼‰ ===== */
.omikuji-box{
  background:linear-gradient(135deg,#fff5f5,#fff0f0);
  border:2px solid #d32f2f;
  padding:20px;
  border-radius:10px;
  margin-bottom:30px;
  text-align:center;
}
.omikuji-box h3{color:#d32f2f;margin-top:0}
.btn-omikuji{
  background:#d32f2f;
  color:#fff;
  padding:10px 20px;
  border-radius:5px;
  text-decoration:none;
  font-weight:bold;
}

.sns-info{
  background:#e3f2fd;
  padding:15px;
  border-radius:5px;
  border-left:5px solid #2196f3;
}

.link-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:15px;
  margin-top:30px;
}
.link-card{
  background:#f0f0f0;
  padding:15px;
  text-align:center;
  text-decoration:none;
  color:#004da0;
  font-weight:bold;
  border-radius:5px;
}

/* ===== ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ ===== */
.survey-toggle{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#004da0;
  color:#fff;
  padding:12px 20px;
  border-radius:30px;
  font-weight:bold;
  cursor:pointer;
  z-index:1000;
}
.survey-popup{
  position:fixed;
  bottom:80px;
  right:20px;
  width:300px;
  background:#fff;
  border-radius:10px;
  box-shadow:0 5px 20px rgba(0,0,0,.2);
  display:none;
  flex-direction:column;
  z-index:1000;
}
.survey-header{
  background:#004da0;
  color:#fff;
  padding:10px;
  display:flex;
  justify-content:space-between;
}
.survey-body{padding:15px}
.s-rating{display:flex;gap:5px}
.s-rating input{display:none}
.s-rating label{
  flex:1;
  text-align:center;
  background:#eee;
  padding:8px 0;
  border-radius:4px;
  cursor:pointer;
}
.s-rating input:checked+label{
  background:#004da0;
  color:#fff;
}
.s-submit{
  width:100%;
  background:#004da0;
  color:#fff;
  border:none;
  padding:12px;
  border-radius:4px;
  font-weight:bold;
}

/* ===== æ›´æ–°é€šçŸ¥ ===== */
.update-toast{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:#323232;
  color:#fff;
  padding:14px 20px;
  border-radius:30px;
  font-size:14px;
  display:none;
  z-index:2000;
}
</style>
</head>

<body>

<header></header>
<nav></nav>

<div class="container">

<section class="omikuji-box">
  <h3 id="txt-omikuji-title">ã€2å‘¨å¹´è¨˜å¿µã€‘é‰„é“ãŠã¿ãã˜ å…¬é–‹ä¸­</h3>
  <p id="txt-omikuji-note">2026å¹´1æœˆ31æ—¥ã¾ã§å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚</p>
  <a class="btn-omikuji" href="https://shinorail.github.io/shinonoi-2026/">ç‰¹è¨­ã‚µã‚¤ãƒˆã¯ã“ã¡ã‚‰</a>
</section>

<p id="txt-welcome">
  ã‚ˆã†ã“ãã€ç¯ ãƒäº•ä¹—å‹™åŒºã®å…¬å¼ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã¸ã€‚
</p>

<section class="sns-info">
  <strong>â—‡ æœ€æ–°æƒ…å ±ã¯ Xï¼ˆæ—§Twitterï¼‰ã§ç™ºä¿¡ä¸­</strong><br>
  <a href="https://x.com/Shino_Rail" target="_blank">@Shino_Rail</a>
</section>

<section style="margin-top:40px">
  <h3>æœ€æ–°ã®ãŠçŸ¥ã‚‰ã›</h3>
  <p id="news-loading">èª­ã¿è¾¼ã¿ä¸­...</p>
  <ul id="top-news-list"></ul>
  <div style="text-align:right;font-size:13px">
    <a href="news.html">ãŠçŸ¥ã‚‰ã›ä¸€è¦§ã¸</a>
  </div>
</section>

<div class="link-grid">
  <a class="link-card" href="mission.html">â–¶ æ´»å‹•ç†å¿µã‚’è¦‹ã‚‹</a>
  <a class="link-card" href="history.html">â–¶ æ²¿é©ã‚’è¦‹ã‚‹</a>
  <a class="link-card" href="news.html">â–¶ ãŠçŸ¥ã‚‰ã›ã‚’è¦‹ã‚‹</a>
</div>

</div>

<div id="survey-toggle" class="survey-toggle" onclick="toggleSurvey()">ğŸ“© ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå”åŠ›</div>

<div id="survey-container" class="survey-popup">
  <div class="survey-header">
    <span>é–²è¦§è€…ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</span>
    <button onclick="toggleSurvey()">Ã—</button>
  </div>

  <form id="survey-form" class="survey-body">
    <div class="s-rating">
      <input id="r1" type="radio" name="rate" value="1"><label for="r1">1</label>
      <input id="r2" type="radio" name="rate" value="2"><label for="r2">2</label>
      <input id="r3" type="radio" name="rate" value="3" checked><label for="r3">3</label>
      <input id="r4" type="radio" name="rate" value="4"><label for="r4">4</label>
      <input id="r5" type="radio" name="rate" value="5"><label for="r5">5</label>
    </div>
    <textarea id="msg" rows="3" placeholder="ã”è‡ªç”±ã«ãŠæ›¸ããã ã•ã„"></textarea>
    <button class="s-submit">é€ä¿¡ã™ã‚‹</button>
  </form>

  <div id="survey-thanks" style="display:none;padding:20px;text-align:center">
    <strong>ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</strong><br>
    <small>ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆé€ä¿¡å¾Œã€ã‚¢ãƒ—ãƒªåˆ©ç”¨ã‚‚ãœã²ã”æ¤œè¨ãã ã•ã„ã€‚</small>
  </div>
</div>

<div id="update-toast" class="update-toast">
  æ–°ã—ã„æ›´æ–°ãŒã‚ã‚Šã¾ã™ã€‚ã¾ã‚‚ãªãåæ˜ ã•ã‚Œã¾ã™ã€‚
</div>

<footer></footer>

<script src="menu.js"></script>

<div id="google_translate_element" style="display:none"></div>
<script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement(
    { pageLanguage:'ja', includedLanguages:'ja,en', autoDisplay:false },
    'google_translate_element'
  );
}
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script>
/* ===== ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ ===== */
function toggleSurvey(){
  const s=document.getElementById('survey-container');
  s.style.display=s.style.display==='flex'?'none':'flex';
}

/* ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆéè¡¨ç¤º */
function surveyVisibility(){
  document.getElementById('survey-toggle').style.display =
    navigator.onLine ? 'block' : 'none';
}
window.addEventListener('online',surveyVisibility);
window.addEventListener('offline',surveyVisibility);
surveyVisibility();

/* ===== Service Worker ç™»éŒ² & PWAåˆ¶å¾¡ ===== */
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js').then(reg => {
      console.log('PWA Ready');
      
      reg.addEventListener('updatefound', () => {
        const nw = reg.installing;
        nw.addEventListener('statechange', () => {
          if (nw.state === 'installed' && navigator.serviceWorker.controller) {
            showUpdate(nw);
          }
        });
      });
    }).catch(err => console.log('PWA Error', err));
  });
}

function showUpdate(waitingSW){
  if(window.innerWidth >= 768) return;
  const t = document.getElementById('update-toast');
  t.style.display = 'block';
  setTimeout(() => {
    if(waitingSW) waitingSW.postMessage({action: 'skipWaiting'});
    location.reload();
  }, 2000);
}
</script>

</body>
</html>
