<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ›ãƒ¼ãƒ  - ç¯ ãƒäº•ä¹—å‹™åŒº</title>

<link rel="stylesheet" href="style.css">

<style>
/* indexå°‚ç”¨ãƒ‡ã‚¶ã‚¤ãƒ³ */
.omikuji-box {
  background: linear-gradient(135deg, #fff5f5 0%, #fff0f0 100%);
  border: 2px solid #d32f2f;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 30px;
  text-align: center;
}
.omikuji-box h3 { color:#d32f2f; margin-top:0; }

.btn-omikuji {
  display:inline-block;
  background:#d32f2f;
  color:#fff;
  padding:10px 20px;
  text-decoration:none;
  border-radius:5px;
  font-weight:bold;
}

.sns-info {
  background:#e3f2fd;
  padding:15px;
  border-radius:5px;
  margin:20px 0;
  border-left:5px solid #2196f3;
}

.link-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:15px;
  margin-top:30px;
}

.link-card {
  background:#f0f0f0;
  padding:15px;
  text-align:center;
  text-decoration:none;
  color:#004da0;
  font-weight:bold;
  border-radius:5px;
  border:1px solid #ddd;
}

/* ç§»è¨­æ¡ˆå†… */
.popup-overlay {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  z-index:2000;
  justify-content:center;
  align-items:center;
}
.popup-content {
  background:#fff;
  padding:30px;
  border-radius:10px;
  width:85%;
  max-width:400px;
  text-align:center;
}
.btn-close {
  background:#004da0;
  color:#fff;
  border:none;
  padding:10px 20px;
  border-radius:5px;
  font-weight:bold;
}

/* ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ */
.survey-toggle {
  position:fixed;
  bottom:20px;
  right:20px;
  background:#004da0;
  color:#fff;
  padding:12px 20px;
  border-radius:30px;
  cursor:pointer;
  z-index:1500;
  font-weight:bold;
}
.survey-popup {
  position:fixed;
  bottom:80px;
  right:20px;
  width:300px;
  background:#fff;
  border-radius:10px;
  display:none;
  flex-direction:column;
  z-index:1500;
  border:1px solid #004da0;
}
.survey-header {
  background:#004da0;
  color:#fff;
  padding:10px;
  display:flex;
  justify-content:space-between;
}
.survey-body { padding:15px; }

.s-rating { display:flex; justify-content:space-between; }
.s-rating input { display:none; }
.s-rating label {
  flex:1;
  margin:0 2px;
  background:#eee;
  padding:8px 0;
  text-align:center;
  border-radius:4px;
  cursor:pointer;
  font-weight:bold;
}
.s-rating input:checked + label {
  background:#004da0;
  color:#fff;
}

/* PWAèª˜è‡´ï¼ˆå·¦ä¸‹ï¼‰ */
#pwa-install {
  display:none;
  position:fixed;
  bottom:20px;
  left:20px;
  background:#004da0;
  color:#fff;
  padding:12px 16px;
  border-radius:30px;
  z-index:1500;
  font-weight:bold;
}
#pwa-install button {
  margin-left:8px;
  background:#fff;
  color:#004da0;
  border:none;
  padding:6px 10px;
  border-radius:20px;
  font-weight:bold;
}
</style>
</head>

<body>

<header></header>
<nav></nav>

<div class="container">

<section class="omikuji-box">
<h3>ã€2å‘¨å¹´è¨˜å¿µã€‘ãŠæ­£æœˆãŠã¿ãã˜å…¬é–‹ä¸­ã®ãŠçŸ¥ã‚‰ã›</h3>
<p>
ç¾åœ¨ã€2å‘¨å¹´ã‚’è¨˜å¿µã—ãŸã€Œé‰„é“ãŠã¿ãã˜ã€ã‚’
<strong>1æœˆ31æ—¥ã¾ã§ã®æœŸé–“é™å®šã§å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚</strong><br>
æ–°å¹´ã®é‹è©¦ã—ã«ãœã²ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
</p>
<a href="https://shinorail.github.io/shinonoi-2026/" class="btn-omikuji">
2å‘¨å¹´ç‰¹è¨­ã‚µã‚¤ãƒˆã¯ã“ã¡ã‚‰
</a>
</section>

<section>
<p>ã‚ˆã†ã“ãã€ç¯ ãƒäº•ä¹—å‹™åŒºã®å…¬å¼ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã¸ã€‚</p>
</section>

<section class="sns-info">
<p><strong>â—‡ æœ€æ–°æƒ…å ±ã¯ Xï¼ˆæ—§Twitterï¼‰ã§ç™ºä¿¡ä¸­</strong></p>
<p><a href="https://x.com/Shino_Rail" target="_blank">@Shino_Rail</a></p>
</section>

<div class="link-grid">
<a href="mission.html" class="link-card">â–¶ æ´»å‹•ç†å¿µã‚’è¦‹ã‚‹</a>
<a href="history.html" class="link-card">â–¶ æ²¿é©ã‚’è¦‹ã‚‹</a>
<a href="news.html" class="link-card">â–¶ ãŠçŸ¥ã‚‰ã›ã‚’è¦‹ã‚‹</a>
</div>

</div>

<!-- PWAèª˜è‡´ -->
<div id="pwa-install">
ğŸ“² ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
<button id="pwa-install-btn">OK</button>
</div>

<!-- ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ -->
<div id="survey-toggle" class="survey-toggle" onclick="toggleSurvey()">ğŸ“© ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå”åŠ›</div>
<div id="survey-container" class="survey-popup">
<div class="survey-header">
<span>é–²è¦§è€…ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</span>
<button onclick="toggleSurvey()">Ã—</button>
</div>

<form id="survey-form" class="survey-body">
<label>ã‚µã‚¤ãƒˆã®æº€è¶³åº¦ (1-5)</label>
<div class="s-rating">
<input type="radio" name="s-rate" id="sr1" value="1"><label for="sr1">1</label>
<input type="radio" name="s-rate" id="sr2" value="2"><label for="sr2">2</label>
<input type="radio" name="s-rate" id="sr3" value="3" checked><label for="sr3">3</label>
<input type="radio" name="s-rate" id="sr4" value="4"><label for="sr4">4</label>
<input type="radio" name="s-rate" id="sr5" value="5"><label for="sr5">5</label>
</div>

<textarea id="s-msg" rows="3" placeholder="ã”è‡ªç”±ã«ãŠæ›¸ããã ã•ã„"></textarea>
<button type="submit" id="s-btn">é€ä¿¡ã™ã‚‹</button>
</form>
</div>

<footer></footer>

<script src="menu.js"></script>

<script>
const scriptUrl = "https://script.google.com/macros/s/AKfycbwbUTBxVeTkRlAJ1dnBlgcmpGaWI9B0SeMwkwKSwAJYjRDAtVcX67QwA5FcNGaJE9Cq/exec";

/* ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆéè¡¨ç¤º */
if (!navigator.onLine) {
  document.getElementById('survey-toggle').style.display = 'none';
}

/* ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ */
function toggleSurvey(){
  const p = document.getElementById('survey-container');
  p.style.display = (p.style.display === 'flex') ? 'none' : 'flex';
}

document.getElementById('survey-form').addEventListener('submit', async e => {
  e.preventDefault();
  const btn = document.getElementById('s-btn');
  btn.disabled = true;

  const data = {
    name: "åŒ¿å",
    rating: document.querySelector('input[name="s-rate"]:checked').value,
    message: document.getElementById('s-msg').value || "ï¼ˆæœªå…¥åŠ›ï¼‰"
  };

  await fetch(scriptUrl,{method:'POST',body:JSON.stringify(data)});
  btn.disabled = false;
});

/* PWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿åˆ¤å®š */
function isPWAInstalled(){
  return window.matchMedia('(display-mode: standalone)').matches ||
         window.navigator.standalone === true;
}

let deferredPrompt;

window.addEventListener('beforeinstallprompt', e => {
  if (isPWAInstalled()) return;
  e.preventDefault();
  deferredPrompt = e;
  document.getElementById('pwa-install').style.display = 'block';
});

document.getElementById('pwa-install-btn').onclick = async () => {
  document.getElementById('pwa-install').style.display = 'none';
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
};
</script>

</body>
</html>
