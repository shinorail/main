<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>特別室 - 篠ノ井乗務区</title>
    <style>
        body { background: #050505; color: #d4af37; font-family: serif; text-align: center; margin: 0; padding: 40px 20px; }
        #lock { display: none; margin-top: 100px; color: #444; }
        #room { display: none; max-width: 800px; margin: 0 auto; border: 3px double #d4af37; padding: 40px; background: linear-gradient(145deg, #111, #000); }
        h1 { letter-spacing: 0.5em; border-bottom: 1px solid #d4af37; padding-bottom: 20px; }
        .dist { background: rgba(255,255,255,0.05); padding: 20px; margin-top: 30px; border: 1px solid #d4af37; }
        textarea { width: 100%; height: 100px; background: #000; color: #d4af37; border: 1px solid #555; padding: 10px; box-sizing: border-box; font-family: monospace; font-size: 0.8em; }
        .btn { background: #d4af37; color: #000; border: none; padding: 15px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>
<div id="lock"><h2>Access Denied</h2><p>全区間踏破者のみ入室可能です。</p><a href="index.html" style="color:#d4af37;">ホームへ</a></div>
<div id="room">
    <p style="font-size:0.8em; letter-spacing:2px;">STAMP RALLY COMPLETE</p>
    <h1>篠ノ井乗務区 特別室</h1>
    <p>全行程の完走、お疲れ様でした。ここに「走破の証」を授与します。</p>
    <div class="dist">
        <h3>【特別室限定】黄金の走破証パーツ</h3>
        <div id="preview" style="margin:20px 0; display:flex; justify-content:center;"></div>
        <textarea id="code" readonly></textarea>
        <button class="btn" onclick="copy()">この証を複写（コピー）する</button>
    </div>
    <br><a href="index.html" style="color:#d4af37; text-decoration:none; font-size:0.8em;">ホームに戻る</a>
</div>
<script>
    const trophy = `<div style="border:3px double #d4af37;background:#000;color:#d4af37;padding:15px;width:250px;text-align:center;font-family:serif;box-shadow:0 0 10px #d4af37;"><div style="font-size:0.7em;border-bottom:1px solid #d4af37;margin-bottom:8px;">SHINANOI DEPOT</div><div style="font-size:1.1em;font-weight:bold;letter-spacing:2px;">全線走破之証</div><div style="font-size:0.7em;margin-top:8px;">篠ノ井乗務区 公式認定</div></div>`;
    document.addEventListener("DOMContentLoaded", function() {
        const history = JSON.parse(localStorage.getItem('stampHistory') || '{}');
        if (Object.keys(history).length >= 4) {
            document.getElementById('room').style.display = 'block';
            document.getElementById('preview').innerHTML = trophy;
            document.getElementById('code').value = trophy;
        } else {
            document.getElementById('lock').style.display = 'block';
        }
    });
    function copy() {
        document.getElementById('code').select();
        document.execCommand('copy');
        alert("走破証をコピーしました。");
    }
</script>
</body>
</html>
