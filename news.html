<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>お知らせ - 篠ノ井乗務区</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header></header><nav></nav>
    <div class="container">
        <h2>更新情報</h2>
        <div id="loading-area">
            <div class="loading-rail"><div class="train-icon"></div></div>
        </div>
        <ul id="update-list" class="update-list"></ul>
    </div>
    <footer></footer>
    <script src="menu.js"></script>
    <script>
        const spreadsheetUrl = "https://script.google.com/macros/s/AKfycbwbUTBxVeTkRlAJ1dnBlgcmpGaWI9B0SeMwkwKSwAJYjRDAtVcX67QwA5FcNGaJE9Cq/exec";
        async function loadNews() {
            try {
                const response = await fetch(spreadsheetUrl);
                const data = await response.json();
                document.getElementById('loading-area').style.display = 'none';
                const list = document.getElementById('update-list');
                data.reverse().forEach((item, i) => {
                    const li = document.createElement('li');
                    li.innerHTML = `<span class="badge">${item.カテゴリ || '更新'}</span> ${item.日付} - ${item.内容}`;
                    list.appendChild(li);
                    setTimeout(() => li.classList.add('show'), i * 150);
                });
            } catch (e) { document.getElementById('loading-area').innerText = "脱線しました。"; }
        }
        loadNews();
    </script>
</body>
</html>
